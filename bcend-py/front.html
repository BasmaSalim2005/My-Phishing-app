<!DOCTYPE html>
      <html lang="en">
      <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>SafeGuard AI</title>

        <!-- Add smooth modern fonts -->
        <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600;800&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">

        <style>
          :root{
            --bg:#eef2ff;
            --card:#ffffff;
            --muted:#6b7280;
            --accent:#2563eb;
            --neon1:#7c3aed; /* purple */
            --neon2:#06b6d4; /* cyan */
            --success:#059669;
            --danger:#dc2626;
            --radius:12px;
            --glass: rgba(255,255,255,0.6);
            --shadow: 0 8px 30px rgba(16,24,40,0.08);
            --max-width:960px;
          }

          *{box-sizing:border-box}
          body{
            margin:0;
            /* smoother fonts: use Poppins for headings, Inter for body */
            font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
            -webkit-font-smoothing:antialiased;
            -moz-osx-font-smoothing:grayscale;
            text-rendering:optimizeLegibility;
            color: #0f172a;
            min-height:100vh;
            display:flex;
            align-items:center;
            justify-content:center;
            padding:32px;

            /* subtle neon-ish highlights layered over the existing light background */
            background:
              radial-gradient(ellipse at 10% 10%, rgba(124,58,237,0.06), transparent 10%),
              radial-gradient(ellipse at 90% 90%, rgba(6,182,212,0.04), transparent 12%),
              linear-gradient(180deg,var(--bg), #fbfdff 60%);
          }

          .app{
            width:100%;
            max-width:var(--max-width);
            display:grid;
            grid-template-columns: 1fr 420px;
            gap:28px;
            align-items:start;
          }

          /* Center header content (logo + app name) */
          header{
            grid-column:1/-1;
            display:flex;
            align-items:center;
            justify-content:center; /* center horizontally */
            gap:16px;
            margin-bottom:6px;
            text-align:center; /* ensure inner text is centered */
          }
          .logo{
            width:56px; height:56px; border-radius:14px; display:grid; place-items:center;
            margin:0 auto;
            background:linear-gradient(135deg,var(--neon1),var(--neon2));
            color:white; font-weight:700; box-shadow:
              0 8px 30px rgba(124,58,237,0.12),
              0 0 18px rgba(6,182,212,0.06);
            border:1px solid rgba(124,58,237,0.12);
            transition:transform .22s ease, box-shadow .22s ease;
          }
          .logo:hover{ transform:translateY(-3px) scale(1.03); box-shadow: 0 14px 40px rgba(124,58,237,0.14), 0 0 28px rgba(6,182,212,0.08); }

          /* Heading gets a neon gradient "AI" vibe */
          h1{
            font-family: "Poppins", Inter, system-ui, -apple-system, sans-serif;
            font-size:20px; margin:0;
            background: linear-gradient(90deg, var(--neon1), var(--accent), var(--neon2));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 6px 18px rgba(124,58,237,0.06);
          }
          .tag{color:var(--muted); font-size:13px}

          .card{
            background:var(--card);
            border-radius:var(--radius);
            padding:20px;
            box-shadow:var(--shadow);
            border: 1px solid rgba(15,23,42,0.04);
            backdrop-filter: blur(6px);
          }

          .editor{
            display:flex; flex-direction:column; gap:12px;
          }

          textarea#inputText{
            width:100%; min-height:220px; resize:vertical; padding:14px;
            border-radius:10px; border:1px solid rgba(15,23,42,0.06);
            font-size:15px; line-height:1.45; color:var(--muted);
            background: linear-gradient(180deg, rgba(246,249,255,0.6), rgba(255,255,255,0.6));
          }

          .controls{display:flex; gap:12px; align-items:center}

          /* Neon gradient primary button with subtle glow */
          button.primary{
            background: linear-gradient(90deg,var(--neon1), var(--accent), var(--neon2));
            color:white; border:none; padding:10px 16px; border-radius:10px; font-weight:600;
            cursor:pointer; box-shadow: 0 6px 18px rgba(37,99,235,0.12), 0 0 18px rgba(124,58,237,0.06);
            transition: transform .14s ease, box-shadow .14s ease, opacity .14s ease;
          }
          button.primary:hover{ transform:translateY(-3px); box-shadow: 0 18px 40px rgba(124,58,237,0.14), 0 0 32px rgba(6,182,212,0.08); }
          button.primary:disabled{opacity:0.6; cursor:default; transform:none; box-shadow: none;}

          .help{color:var(--muted); font-size:13px}

          /* result panel */
          .result-panel{display:flex; flex-direction:column; gap:12px}
          .result-card{padding:18px; border-radius:12px; background:var(--card)}
          .status{display:flex; justify-content:space-between; align-items:center}
          .status .label{font-size:13px; color:var(--muted)}
          .classification{font-weight:700; font-size:16px; color:#fff; display:inline-block}
          .classification.safe{
            background: linear-gradient(90deg, #10b981, #34d399);
            box-shadow: 0 8px 26px rgba(16,185,129,0.12), 0 0 16px rgba(52,211,153,0.06);
            padding:6px 12px; border-radius:999px;
          }
          .classification.spam{
            background: linear-gradient(90deg,#ef4444,#fb7185);
            box-shadow: 0 8px 26px rgba(239,68,68,0.12), 0 0 16px rgba(251,113,133,0.06);
            padding:6px 12px; border-radius:999px;
          }

          /* result box variants (neutral by default, color when safe/spam) */
          #result{ transition: all .18s ease; }
          #result.safe{ background: rgba(16,185,129,0.04); border: 1px solid rgba(16,185,129,0.12); }
          #result.spam{ background: rgba(239,68,68,0.04); border: 1px solid rgba(239,68,68,0.12); }

          /* result header icon â€” neutral by default, recolored by parent .safe/.spam */
          .result-icon{
            width:46px;
            height:46px;
            border-radius:50%;
            display:grid;
            place-items:center;
            background: #fff7f7;
            border: 1px solid rgba(0,0,0,0.06);
            color: rgba(239,68,68,1); /* default fallback red */
            transition: all .18s ease;
          }
          /* green when safe */
          #result.safe .result-icon{
            background: rgba(16,185,129,0.06);
            border: 1px solid rgba(16,185,129,0.14);
            color: #10b981;
            box-shadow: 0 6px 18px rgba(16,185,129,0.06);
          }
          /* red when spam */
          #result.spam .result-icon{
            background: rgba(239,68,68,0.06);
            border: 1px solid rgba(239,68,68,0.14);
            color: #ef4444;
            box-shadow: 0 6px 18px rgba(239,68,68,0.06);
          }

          .confidence{font-weight:600}

          pre.explain{white-space:pre-wrap; margin:0; color:#111827}

          .meta{font-size:12px; color:var(--muted)}

          /* spinner */
          .spinner{width:18px;height:18px;border-radius:50%;border:3px solid rgba(0,0,0,0.08);border-top-color:var(--accent);animation:spin 1s linear infinite}
          @keyframes spin{to{transform:rotate(360deg)}}

          /* Responsive */
          @media (max-width:900px){
            .app{grid-template-columns:1fr;}
            .logo{width:48px;height:48px}
            h1{font-size:28px}
          }
        </style>
      </head>
      <body>
        <main class="app" role="main">
          <!-- Centered header like the screenshot -->
          <header style="grid-column:1/-1;text-align:center;margin-bottom:22px">
            <div style="display:flex;flex-direction:column;align-items:center;gap:12px">
              <div style="width:72px;height:72px;border-radius:18px;display:grid;place-items:center;background:linear-gradient(180deg,#e6f0ff,#dbe9ff);box-shadow:0 10px 30px rgba(37,99,235,0.08)">
                <!-- simple shield icon SVG -->
                <svg width="34" height="34" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                  <path d="M12 2L4 5v6c0 5 3.8 9.74 8 11 4.2-1.26 8-6 8-11V5l-8-3z" fill="#3b82f6"/>
                  <path d="M9.5 11.5l1.8 1.8 3.7-3.7" stroke="#fff" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </div>
              <div>
                <h1 style="font-size:34px;margin:0;color:#0b1220;font-weight:800">SpamGuard AI</h1>
                <div class="tag" style="margin-top:6px;color:var(--muted);font-size:14px">Advanced spam detection powered by AI</div>
              </div>
            </div>
          </header>

          <!-- Large input card with full-width button -->
          <section style="grid-column:1/-1;" aria-labelledby="input-label">
            <div class="card" style="padding:22px;max-width:880px;margin:0 auto;">
              <label id="input-label" for="inputText" class="meta" style="display:block;margin-bottom:8px;color:var(--muted);font-weight:600">Paste your message, email, or link</label>
              <textarea id="inputText" placeholder="Paste your email or message here..." style="min-height:160px;padding:18px;border-radius:10px;border:1px solid rgba(15,23,42,0.04);font-size:15px;box-shadow:inset 0 1px 0 rgba(255,255,255,0.6);"></textarea>

              <div style="margin-top:14px;display:flex;flex-direction:column;align-items:center;gap:10px;">
                <button id="analyzeBtn" class="primary" style="width:100%;max-width:640px;padding:14px 22px;border-radius:10px;display:flex;align-items:center;justify-content:center;gap:10px;font-size:16px">
                  <!-- shield small icon + text like screenshot -->
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                    <path d="M12 2L4 5v6c0 5 3.8 9.74 8 11 4.2-1.26 8-6 8-11V5l-8-3z" fill="#fff" opacity="0.14"/>
                    <path d="M9.5 11.5l1.8 1.8 3.7-3.7" stroke="#fff" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                  <span>Analyze Text</span>
                </button>
                <div id="statusArea" class="meta" aria-live="polite" style="max-width:640px;width:100%;text-align:center;color:var(--muted);font-size:13px"></div>
              </div>
            </div>
          </section>

          <!-- Result card (neutral by default; colored via class) -->
          <section style="grid-column:1/-1;max-width:880px;margin:18px auto 0;">
            <div id="result" style="display:none;border-radius:12px;padding:18px;">
               <div style="display:flex;align-items:center;gap:12px;margin-bottom:10px">
               <!-- <div style="width:46px;height:46px;border-radius:50%;background:#fff0f1;display:grid;place-items:center;border:1px solid rgba(220,38,38,0.2)">
                 <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 2L4 5v6c0 5 3.8 9.74 8 11 4.2-1.26 8-6 8-11V5l-8-3z" fill="#ef4444"/></svg>
                </div> -->
                <div class="result-icon" aria-hidden="true">
                  <!-- svg uses currentColor so the icon color follows CSS (.safe/.spam) -->
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                   <path d="M12 2L4 5v6c0 5 3.8 9.74 8 11 4.2-1.26 8-6 8-11V5l-8-3z" fill="currentColor"/>
                   <path d="M9.5 11.5l1.8 1.8 3.7-3.7" stroke="#fff" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
               </div>
                 <div style="display:flex;flex-direction:column">
                   <div style="display:flex;align-items:center;gap:8px">
                     <div id="classification" class="classification" aria-live="polite"></div>
                   </div>
                   <div style="color:var(--muted);font-size:13px;margin-top:6px">Confidence: <span id="confidence" style="font-weight:700"></span></div>
                 </div>
               </div>

               <div style="margin-top:12px;background:var(--card);border-radius:10px;padding:14px;box-shadow:var(--shadow);">
                 <div style="font-weight:700;margin-bottom:8px">Analysis Details</div>
                 <pre id="explanation" style="margin:0;white-space:pre-wrap;color:#111827"></pre>
               </div>
            </div>
          </section>
        </main>

        <script>
          const analyzeBtn = document.getElementById('analyzeBtn');
          const input = document.getElementById('inputText');
          const statusArea = document.getElementById('statusArea');
          const resultBox = document.getElementById('result');
          const clsEl = document.getElementById('classification');
          const confEl = document.getElementById('confidence');
          const expEl = document.getElementById('explanation');

          function setLoading(on){
            analyzeBtn.disabled = on;
            statusArea.innerHTML = on ? '<span class="spinner" aria-hidden="true"></span> Analyzingâ€¦' : '';
          }

          async function analyze(){
            const text = input.value.trim();
            if(!text){
              statusArea.textContent = 'Please enter text to analyze.';
              return;
            }

            setLoading(true);
            resultBox.style.display = 'none';
            // reset previous state
            resultBox.classList.remove('spam','safe');

            try{
              const res = await fetch('http://127.0.0.1:8000/analyze_full', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ text })
              });

              if(!res.ok){
                const txt = await res.text();
                throw new Error(`Server returned ${res.status}: ${txt}`);
              }

              const data = await res.json();
              const cls = (data.classification || 'unknown').toLowerCase();

              // simple badge text + class
              if (cls === 'spam') {
                clsEl.textContent = 'SPAM DETECTED';
                clsEl.className = 'classification spam';
                resultBox.classList.add('spam');
              } else if (cls === 'safe') {
                clsEl.textContent = 'SAFE';
                clsEl.className = 'classification safe';
                resultBox.classList.add('safe');
              } else {
                clsEl.textContent = (data.classification || 'UNKNOWN').toUpperCase();
                clsEl.className = 'classification';
              }

              confEl.textContent = data.confidence ?? 'N/A';
              expEl.textContent = data.explanation ?? '';

              resultBox.style.display = 'block';
              statusArea.textContent = '';
            }catch(err){
              console.error(err);
              statusArea.textContent = 'Error: ' + err.message;
            }finally{
              setLoading(false);
            }
          }

          analyzeBtn.addEventListener('click', analyze);

          // allow Cmd/Ctrl+Enter to submit
          input.addEventListener('keydown', (e)=>{
            if((e.ctrlKey || e.metaKey) && e.key === 'Enter') analyze();
          });
        </script>
      </body>
      </html>
